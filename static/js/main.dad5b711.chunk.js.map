{"version":3,"sources":["config.js","App.js","Welcome.js","Login.js","404.js","index.js"],"names":["lc_config","useStyles","makeStyles","theme","root","display","position","bottom","spacing","right","menuButton","marginRight","title","flexGrow","chatForm","appBar","zIndex","drawer","width","flexShrink","drawerPaper","drawerContainer","overflow","content","padding","ChatView","props","endpoint","chatroom","useState","messages","timestamp","msgs","setMsgs","load","setLoad","timeo","setTimeo","enqueueSnackbar","useSnackbar","handleInform","words","variant","loadRoom","firsttime","fetch","method","body","encodeURIComponent","headers","Headers","then","res","json","catch","error","response","anchor","document","querySelector","scrollIntoView","behavior","block","length","e","updateMsg","setTimeout","useEffect","clearTimeout","rrobject","JSON","parse","localStorage","recentRoom","rooms","shift","date","Date","unshift","name","getMonth","getDate","getHours","getMinutes","stringify","List","map","v","index","MsgView","data","msgid","LinearProgress","style","ChatForm","imgupl","setImgupl","getCookie","cname","ca","cookie","split","i","c","trim","indexOf","substring","sendHandler","msgValue","value","msgData","FormData","append","text","id","Typography","TextField","label","placeholder","multiline","margin","fullWidth","maxLength","onKeyDown","ev","window","event","keyCode","ctrlKey","Button","color","onClick","accept","type","onChange","imgFiles","files","picData","code","picurl","sendPicHandler","url","msg","htmlFor","IconButton","component","CircularProgress","size","ListItem","alignItems","ListItemAvatar","Avatar","src","backgroundColor","str","parseInt","charCodeAt","toString","slice","avatarColor","substr","ListItemText","primary","secondary","Fragment","whiteSpace","renderTextMsg","href","target","height","alt","maxHeight","renderPicMsg","renderMsg","time","app","Divider","ScrollBtn","children","direction","classes","tri","useScrollTrigger","undefined","disableHysteresis","threshold","trigger","Zoom","in","ownerDocument","role","className","LeftBar","button","location","hash","ListItemIcon","roomname","link","textDecoration","signupLink","createTheme","palette","blue","teal","rootElement","getElementById","ReactDOM","render","ThemeProvider","path","exact","useTheme","login","setLogin","Storage","alert","console","CssBaseline","AppBar","Toolbar","edge","Container","FormControl","required","to","noValidate","autoComplete","action","room","match","params","React","dropen","setDropen","handleDrawerClose","maxSnack","autoHideDuration","Drawer","paper","open","onClose","Fab"],"mappings":"kLAIeA,EAJG,CACd,MAAS,cACT,SAAY,gC,0TCmCVC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACxCC,KAAM,CACLC,QAAS,OACTC,SAAU,QACVC,OAAQJ,EAAMK,QAAQ,GACtBC,MAAON,EAAMK,QAAQ,IAEtBE,WAAY,CACXC,YAAaR,EAAMK,QAAQ,IAE5BI,MAAO,CACNC,SAAU,GAEXC,SAAU,GACVC,OAAQ,CACPC,OAAQb,EAAMa,OAAOC,OAAS,GAE/BA,OAAQ,CACPC,MAAO,IACPC,WAAY,GAEbC,YAAa,CACZF,MAAO,KAERG,gBAAiB,CAChBC,SAAU,QAEXC,QAAS,CACRV,SAAU,EACVW,QAASrB,EAAMK,QAAQ,QAIzB,SAASiB,EAASC,GACjB,IAAQC,EAAuBD,EAAvBC,SAAUC,EAAaF,EAAbE,SAClB,EAAwBC,mBAAS,CAAEC,SAAU,GAAIC,UAAW,IAA5D,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAAwBJ,mBAAS,GAAjC,mBAAOK,EAAP,KAAaC,EAAb,KACA,EAA0BN,oBAAU,GAApC,mBAAOO,EAAP,KAAcC,EAAd,KACQC,EAAoBC,cAApBD,gBAEFE,EAAe,SAAUC,EAAOC,GACrCJ,EAAgBG,EAAO,CAAEC,aA2B1B,SAASC,EAASC,GAEjBT,EAAQ,GAERU,MAAMlB,EAAW,gBAAiB,CACjCmB,OAAQ,OACRC,KACC,QACAC,mBAAmBpB,GACnB,WACAoB,oBATY,GAUbC,QAAS,IAAIC,QAAQ,CACpB,eAAgB,wCAGhBC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBC,OAAM,SAACC,GAAD,OAAWf,EAAa,iBAAmBe,EAAO,YACxDJ,MAAK,SAACK,GAAD,OAzCR,SAAmBjC,EAASqB,GAC3B,IAEC,GADAX,EAAQV,GACU,IAAdqB,EAAiB,CACpB,IAAMa,EAASC,SAASC,cAAc,uBAClCF,GACHA,EAAOG,eAAe,CACrBC,SAAU,SACVC,MAAO,WAGTtB,EAAa,wBAA0BZ,EAAU,WAC7CL,EAAQwC,OAAS,GACpBvB,EACC,6DACA,SAIF,MAAOwB,GACRxB,EAAa,6BAA+BwB,EAAG,SAEhD7B,EAAQ,GAmBa8B,CAAUT,EAAUZ,MACvCO,MAAK,WACLd,EACC6B,YAAW,WACVvB,EAAS,KACP,SAoDP,OA/CAwB,qBAAU,YACM,IAAX/B,GACHgC,aAAahC,GAEdO,EAAS,GACT,IAAI0B,EAAWC,KAAKC,MAAMC,aAAaC,YACnCJ,EAASK,MAAMX,QAAU,GAC5BM,EAASK,MAAMC,QAEhB,IAAIC,EAAO,IAAIC,KACfR,EAASK,MAAMI,QAAQ,CACtBC,KAAMnD,EACNgD,KACCA,EAAKI,WACL,EACA,IACAJ,EAAKK,UACL,IACAL,EAAKM,WACL,IACAN,EAAKO,eAwBPX,aAAaC,WAAaH,KAAKc,UAAUf,KACvC,CAACzC,IAGH,gCACC,cAACyD,EAAA,EAAD,UACErD,EAAKF,SAASwD,KAAI,SAACC,EAAGC,GACtB,OAAO,cAACC,EAAD,CAAuBC,KAAMH,GAAfA,EAAEI,YAGzB,cAACC,EAAA,EAAD,CAAgBC,MAAO,CAAExF,QAAS6B,EAAO,QAAU,aAKtD,SAAS4D,EAASpE,GACjB,IAAQY,EAAoBC,cAApBD,gBACAX,EAAuBD,EAAvBC,SAAUC,EAAaF,EAAbE,SAClB,EAA8BC,mBAAS,GAAvC,mBAAQkE,EAAR,KAAgBC,EAAhB,KAEA,SAASC,EAAUC,GAGlB,IAFA,IAAInB,EAAOmB,EAAQ,IACfC,EAAKzC,SAAS0C,OAAOC,MAAM,KACtBC,EAAI,EAAGA,EAAIH,EAAGpC,OAAQuC,IAAK,CACnC,IAAIC,EAAIJ,EAAGG,GAAGE,OACd,GAAwB,IAApBD,EAAEE,QAAQ1B,GACb,OAAOwB,EAAEG,UAAU3B,EAAKhB,OAAQwC,EAAExC,QAEpC,MAAO,GAER,IAAMvB,EAAe,SAAUC,EAAOC,GACrCJ,EAAgBG,EAAO,CAAEC,aAE1B,SAASiE,IACR,IAAIC,EAAWlD,SAASC,cAAc,sBAAsBkD,MACxDC,EAAU,IAAIC,SAClBD,EAAQE,OAAO,OAAQpF,GACvBkF,EAAQE,OAAO,KAAMf,EAAU,WAC/Ba,EAAQE,OAAO,MAAOf,EAAU,aAChCa,EAAQE,OAAO,MAAOJ,GACtBE,EAAQE,OAAO,OAAQ,GACvBF,EAAQE,OAAO,SAAU,kCACzBnE,MAAMlB,EAAW,gBAAiB,CACjCmB,OAAQ,OACRC,KAAM+D,IAEL3D,MAAK,SAACC,GAAD,OAASA,EAAI6D,UAClB3D,OAAM,SAACC,GAAD,OAAWf,EAAa,iBAAmBe,EAAO,YACxDJ,MAAK,SAAUK,GACE,YAAbA,EACHhB,EAAagB,EAAU,YAEvBhB,EAAa,eAAgB,WAC7BkB,SAASC,cAAc,sBAAsBkD,MAAQ,OA2DzD,OACC,8BACC,uBAAMK,GAAG,gBAAT,UACC,eAACC,EAAA,EAAD,CAAYzE,QAAQ,QAApB,uCAC4Bd,KAE5B,cAACwF,EAAA,EAAD,CACCF,GAAG,oBACHG,MAAM,gBACNC,YAAY,2BACZC,WAAS,EACTC,OAAO,SACPC,WAAS,EACT/E,QAAQ,SACRgF,UAAW,KACXC,UAtEJ,SAAwB3D,GACvB,IAAI4D,EAAK5D,GAAK6D,OAAOC,MACF,KAAfF,EAAGG,SAAkBH,EAAGI,SAC3BrB,OAqEC,cAACsB,EAAA,EAAD,CACCvF,QAAQ,YACRwF,MAAM,UACNC,QAASxB,EAHV,kBAOA,uBACCyB,OAAO,UACPlB,GAAG,aACHmB,KAAK,OACLxC,MAAO,CAAExF,QAAS,QAClBiI,SAxDJ,WACItC,EAAU,GACb,IAAIuC,EAAW7E,SAASC,cAAc,eAAe6E,MACjDC,EAAU,IAAI1B,SAClB0B,EAAQzB,OAAO,OAAQhH,EAAUY,OACjC6H,EAAQzB,OAAO,QAASuB,EAAS,IAEjC1F,MAAM,oCAAqC,CAC1CC,OAAQ,OACRC,KAAM0F,IAENtF,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBC,OAAM,SAACC,GAAD,OAAWf,EAAa,iBAAmBe,EAAO,YACxDJ,MAAK,SAAUK,GACXA,EAASkF,KAAO,MAAQ,EApC9B,SAAwBC,GACvB,IAAI7B,EAAU,IAAIC,SAClBD,EAAQE,OAAO,OAAQpF,GACvBkF,EAAQE,OAAO,KAAMf,EAAU,WAC/Ba,EAAQE,OAAO,MAAOf,EAAU,aAChCa,EAAQE,OAAO,MAAO2B,GACtB7B,EAAQE,OAAO,OAAQ,GACvBF,EAAQE,OAAO,SAAU,kCACzBnE,MAAMlB,EAAW,gBAAiB,CACjCmB,OAAQ,OACRC,KAAM+D,IAEL3D,MAAK,SAACC,GAAD,OAASA,EAAI6D,UAClB3D,OAAM,SAACC,GAAD,OAAWf,EAAa,iBAAmBe,EAAO,YACxDJ,MAAK,SAAUK,GACE,YAAbA,EACHhB,EAAagB,EAAU,WAEvBhB,EAAa,eAAgB,cAoB9BoG,CAAepF,EAASkC,KAAKmD,KAE7BrG,EACC,wBAA0BgB,EAASsF,IACnC,SAGC9C,EAAU,SAmCZ,uBAAO+C,QAAQ,aAAf,SACC,cAACC,EAAA,EAAD,CACCd,MAAM,UACN,aAAW,iBACXe,UAAU,OAHX,SAKC,cAAC,IAAD,QAGF,cAACC,EAAA,EAAD,CAAkBC,KAAM,GAAItD,MAASE,EAA+B,GAAtB,CAAE1F,QAAS,eAM7D,SAASoF,EAAQ/D,GAChB,IAAQgE,EAAShE,EAATgE,KACQzF,IA0DhB,OACC,sBAAK,aAAYyF,EAAKC,MAAtB,UACC,eAACyD,EAAA,EAAD,CAAUC,WAAW,aAArB,UACC,cAACC,EAAA,EAAD,UACC,cAACC,EAAA,EAAD,CACCC,IAAK9D,EAAKiD,OACV9C,MAAO,CAAE4D,gBA9Dd,SAAqB1E,GAEpB,IADA,IAAI2E,EAAM,GACDpD,EAAI,EAAGA,EAAIvB,EAAKhB,OAAQuC,IAChCoD,GAAOC,SAAS5E,EAAKuB,GAAGsD,WAAW,GAAI,IAAIC,SAAS,IAErD,MAAO,IAAMH,EAAII,MAAM,EAAG,GAyDIC,CAAYrE,EAAKX,OAF5C,SAIEW,EAAKX,KAAKiF,OAAO,EAAG,OAGvB,cAACC,EAAA,EAAD,CACCC,QAASxE,EAAKX,KACdoF,UACC,eAAC,IAAMC,SAAP,WAzBL,SAAmB1E,GAClB,OAAQA,EAAK2C,MACZ,KAAK,EACJ,OAnCH,SAAuB3C,GACtB,OACC,cAAC,IAAM0E,SAAP,UACC,eAACjD,EAAA,EAAD,CACC8B,UAAU,OACVvG,QAAQ,QACRwF,MAAM,cACNrC,MAAO,CAAEwE,WAAY,YAJtB,UAME3E,EAAKnE,QACN,4BAyBM+I,CAAc5E,GACtB,KAAK,EACJ,OArBH,SAAsBA,GACrB,OACC,eAAC,IAAM0E,SAAP,WACC,mBAAGG,KAAM7E,EAAKnE,QAASiJ,OAAO,SAA9B,SACC,qBACChB,IAAK9D,EAAKnE,QACVkJ,OAAQ,IACRC,IAAKhF,EAAKX,KACVc,MAAO,CAAE8E,UAAW,SAGtB,0BAUOC,CAAalF,GACrB,QACC,OAAO,cAAC,IAAM0E,SAAP,mBAmBHS,CAAUnF,GACVA,EAAKoF,KAAO,MAAQpF,EAAKqF,YAK9B,cAACC,EAAA,EAAD,CAAStI,QAAQ,QAAQuG,UAAU,UAKtC,SAASgC,EAAUvJ,GAClB,IAAQwJ,EAAgCxJ,EAAhCwJ,SAAUrD,EAAsBnG,EAAtBmG,OAAQsD,EAAczJ,EAAdyJ,UACpBC,EAAUnL,IACZoL,EAAMC,YAAiB,CAC1Bd,OAAQ3C,EAASA,SAAW0D,EAC5BC,mBAAmB,EACnBC,UAAW,MAEM,SAAdN,IACHE,GAAOA,GAER,IAAMK,EAAUL,EAYhB,OACC,cAACM,EAAA,EAAD,CAAMC,GAAIF,EAAV,SACC,qBACCvD,QAbiB,SAACL,GACpB,IAAMrE,GAAUqE,EAAM0C,OAAOqB,eAAiBnI,UAAUC,cAC1C,QAAbwH,EAAsB,sBAAwB,uBAG3C1H,GACHA,EAAOG,eAAe,CAAEC,SAAU,SAAUC,MAAO,YAQlDgI,KAAK,eACLC,UAAWX,EAAQhL,KAHpB,SAKE8K,MAWL,SAASc,EAAQtK,GAChB,IAAM0J,EAAUnL,IAEhB,SAAS8J,EAAYhF,GAEpB,IADA,IAAI2E,EAAM,GACDpD,EAAI,EAAGA,EAAIvB,EAAKhB,OAAQuC,IAChCoD,GAAOC,SAAS5E,EAAKuB,GAAGsD,WAAW,GAAI,IAAIC,SAAS,IAErD,MAAO,IAAMH,EAAII,MAAM,EAAG,GAG3B,OACC,cAAC,IAAMM,SAAP,UACC,qBAAK2B,UAAWX,EAAQ/J,gBAAxB,SACC,eAACgE,EAAA,EAAD,WACC,eAAC+D,EAAA,EAAD,CACC6C,QAAM,EACN9D,QAAS,WACRN,OAAOqE,SAASC,KAAO,KAHzB,UAMC,cAACC,EAAA,EAAD,UACC,cAAC,IAAD,MAED,cAACnC,EAAA,EAAD,CAAcC,QAAQ,YAEvB,cAACc,EAAA,EAAD,IACA,cAAC5B,EAAA,EAAD,2BACC9E,KAAKC,MAAMC,aAAaC,YAAYC,MAAMY,KAC1C,SAACC,EAAGC,GACH,OACC,eAAC4D,EAAA,EAAD,CACCC,WAAW,aAEX4C,QAAM,EACN9D,QAAS,WACR,IAAIkE,EAAW9G,EAAER,KACjB,GAAiB,KAAbsH,EAIH,OAHAxE,OAAOqE,SAASC,KACf,SACAnJ,mBAAmBqJ,IACb,GAVV,UAcC,cAAC/C,EAAA,EAAD,UACC,cAACC,EAAA,EAAD,CACC1D,MAAO,CACN4D,gBAAiBM,EAChBxE,EAAER,OAHL,SAOEQ,EAAER,KAAKiF,OAAO,EAAG,OAGpB,cAACC,EAAA,EAAD,CACCC,QAAS3E,EAAER,KACXoF,UACC,cAAC,IAAMC,SAAP,UACE7E,EAAEX,WA3BDY,a,cC1dRvF,I,MAAYC,aAAW,SAACC,GAAD,MAAY,CACxCC,KAAM,CACLE,SAAU,QACVC,OAAQJ,EAAMK,QAAQ,GACtBC,MAAON,EAAMK,QAAQ,IAEtBE,WAAY,CACXC,YAAaR,EAAMK,QAAQ,IAE5BI,MAAO,CACNC,SAAU,GAEXyL,KAAM,CACLpE,MAAO,sBACPqE,eAAgB,OAChB,UAAW,CACDA,eAAgB,mBChB5B,IAAMtM,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCC,KAAM,CACLE,SAAU,QACVC,OAAQJ,EAAMK,QAAQ,GACtBC,MAAON,EAAMK,QAAQ,IAEtBE,WAAY,CACXC,YAAaR,EAAMK,QAAQ,IAE5BI,MAAO,CACNC,SAAU,GAEX2L,WAAY,CACRtE,MAAO,sBACVqE,eAAgB,OAChB,UAAW,CACDA,eAAgB,kBCrB5B,IAAMtM,GAAYC,aAAW,SAACC,GAAD,MAAY,CACxCC,KAAM,CACLE,SAAU,QACVC,OAAQJ,EAAMK,QAAQ,GACtBC,MAAON,EAAMK,QAAQ,IAEtBE,WAAY,CACXC,YAAaR,EAAMK,QAAQ,IAE5BI,MAAO,CACNC,SAAU,O,gCCZP2D,aAAaC,aACjBD,aAAaC,WAAa,iBAK3B,IAAMtE,GAAQsM,aAAY,CACzBC,QAAS,CACRrE,KAAM,OACN6B,QAASyC,KACTxC,UAAWyC,QAIPC,GAAcnJ,SAASoJ,eAAe,QAC5CC,IAASC,OACR,cAAC,aAAD,UACC,cAACC,EAAA,EAAD,CAAe9M,MAAOA,GAAtB,SACC,cAAC,IAAD,UACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAO+M,KAAK,IAAIC,OAAK,EAAClE,UHQZ,SAAiBvH,GAC/B,IAAM0J,EAAUnL,KACVE,EAAQiN,cAEd,EAA0BvL,mBAAS,GAAnC,mBAAOwL,EAAP,KAAcC,EAAd,KA2BA,OAdAnJ,qBAAU,WACc,qBAAZoJ,UACVC,MACC,oMAEDC,QAAQlK,MACP,sMAG6C,GApBhD,SAAmB2C,GAGlB,IAFA,IAAInB,EAAOmB,EAAQ,IACfC,EAAKzC,SAAS0C,OAAOC,MAAM,KACtBC,EAAI,EAAGA,EAAIH,EAAGpC,OAAQuC,IAAK,CACnC,IAAIC,EAAIJ,EAAGG,GAAGE,OACd,GAAwB,IAApBD,EAAEE,QAAQ1B,GACb,OAAOwB,EAAEG,UAAU3B,EAAKhB,OAAQwC,EAAExC,QAEpC,MAAO,GAYHkC,CAAU,YAAYQ,QAAQ,UACjC6G,EAAS,MAKV,cAAC,IAAMlD,SAAP,UACC,eAAC6C,EAAA,EAAD,CAAe9M,MAAOA,EAAtB,UACC,cAACuN,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAQrN,SAAS,SAAjB,SACC,eAACsN,EAAA,EAAD,WACC,cAAC5E,EAAA,EAAD,CACC6E,KAAK,QACL9B,UAAWX,EAAQ1K,WACnBwH,MAAM,UACN,aAAW,OACXC,QAAS,WACRN,OAAOqE,SAASC,KAAO,KANzB,SASC,cAAC,IAAD,MAED,cAAChF,EAAA,EAAD,CAAYzE,QAAQ,KAApB,SAA0B1C,EAAUY,aAGtC,cAACgN,EAAA,EAAD,CAAS1G,GAAG,uBACZ,eAAC4G,EAAA,EAAD,WACC,cAAC3G,EAAA,EAAD,CAAYzE,QAAQ,KAAKuG,UAAU,KAAnC,kCAGA,uBACA,sBAAK/B,GAAG,aAAR,UACC,cAACC,EAAA,EAAD,CAAYzE,QAAQ,QAAQuG,UAAU,IAAtC,0DAGA,uBACA,8BACC,eAAC8E,GAAA,EAAD,CAAarL,QAAQ,WAArB,UACC,cAAC0E,EAAA,EAAD,CACCiB,KAAK,OACLnB,GAAG,mBACHG,MAAM,YACNtC,KAAK,WACLrC,QAAQ,WACRsL,UAAQ,IAET,cAAC/F,EAAA,EAAD,CACCvF,QAAQ,YACRwF,MAAM,UACNC,QAAS,WACR,IAAIkE,EACH3I,SAASC,cACR,qBACCkD,MACH,GAAiB,KAAbwF,EAAiB,CACpBxE,OAAOqE,SAASC,KACf,SACAnJ,mBAAmBqJ,GACpB,IAAIhI,EAAWC,KAAKC,MACnBC,aAAaC,YAEVJ,EAASK,MAAMX,QAAU,GAC5BM,EAASK,MAAMC,QAEhB,IAAIC,EAAO,IAAIC,KAiBf,OAhBAR,EAASK,MACRL,EAASK,MAAMX,QACZ,CACHgB,KAAMsH,EACNzH,KACiCA,EAAKI,WACrC,EACA,IACAJ,EAAKK,UACL,IACAL,EAAKM,WACL,IACAN,EAAKO,cAEPX,aAAaC,WACZH,KAAKc,UAAUf,IACT,IAnCV,0BA4CH,sBAAKwB,MAAO,CAAExF,QAASgN,EAAQ,OAAS,SAAxC,UACC,uBACA,eAAClG,EAAA,EAAD,CAAYzE,QAAQ,QAApB,8CACmC,IAClC,cAAC,IAAD,CAAMuL,GAAG,SAASlC,UAAWX,EAAQkB,KAArC,wBAEQ,IAJT,6BAMC,6BAGF,gCACC,uBACA,cAACnF,EAAA,EAAD,CAAYzE,QAAQ,KAAKuG,UAAU,KAAnC,0BAGA,eAAC9B,EAAA,EAAD,CAAYzE,QAAQ,QAApB,UACI,uBADJ,0CAIA,eAACyE,EAAA,EAAD,CAAYzE,QAAQ,QAApB,mCAEC,uBACA,+BACI,4EACA,0EACA,gEACA,wFACA,4HACA,0DATL,wCAYC,uBACA,+BACI,gHACA,gGACA,uGAhBL,mFAmBC,mBACC6H,KAAK,+BACLwB,UAAWX,EAAQkB,KAFpB,uCAMA,uBAzBD,gMA2BC,uBACA,wCG3KF,cAAC,IAAD,CAAOY,KAAK,SAASjE,UFOX,SAAevH,GAC7B,IAAM0J,EAAUnL,KACVE,EAAQiN,cAEX,SAASnH,EAAUC,GAGlB,IAFA,IAAInB,EAAOmB,EAAQ,IACfC,EAAKzC,SAAS0C,OAAOC,MAAM,KACtBC,EAAI,EAAGA,EAAIH,EAAGpC,OAAQuC,IAAK,CACnC,IAAIC,EAAIJ,EAAGG,GAAGE,OACd,GAAwB,IAApBD,EAAEE,QAAQ1B,GAAa,OAAOwB,EAAEG,UAAU3B,EAAKhB,OAAQwC,EAAExC,QAE9D,MAAO,GAOX,MAJkC,KAA1BkC,EAAU,aAA8C,KAAxBA,EAAU,YAC3C4B,OAAOqE,SAASC,KAAO,KAI7B,cAAC,IAAM/B,SAAP,UACC,eAAC6C,EAAA,EAAD,CAAe9M,MAAOA,EAAtB,UACC,cAACuN,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAQrN,SAAS,SAAjB,SACC,eAACsN,EAAA,EAAD,WACC,cAAC5E,EAAA,EAAD,CACC6E,KAAK,QACL9B,UAAWX,EAAQ1K,WACnBwH,MAAM,UACN,aAAW,OACXC,QAAS,WACRN,OAAOqE,SAASC,KAAO,KANzB,SASC,cAAC,IAAD,MAED,cAAChF,EAAA,EAAD,CAAYzE,QAAQ,KAApB,SAA0B1C,EAAUY,aAGtC,cAACgN,EAAA,EAAD,CAAS1G,GAAG,uBACZ,eAAC4G,EAAA,EAAD,WACC,cAAC3G,EAAA,EAAD,CAAYzE,QAAQ,KAAKuG,UAAU,KAAnC,mBAGA,uBACCiF,YAAU,EACVC,aAAa,MACbC,OAAQpO,EAAU2B,SAAS,cAC3BmB,OAAO,OAJR,UAMC,uBACA,cAACsE,EAAA,EAAD,CACCiB,KAAK,OACLnB,GAAG,aACHG,MAAM,oBACNtC,KAAK,MACLrC,QAAQ,WACRsL,UAAQ,IAET,uBACA,uBACA,cAAC5G,EAAA,EAAD,CACCiB,KAAK,WACLnB,GAAG,aACHG,MAAM,WACNtC,KAAK,MACLrC,QAAQ,WACRsL,UAAQ,IAET,uBACA,uBACA,cAAC/F,EAAA,EAAD,CAAQf,GAAG,YAAYxE,QAAQ,YAAYwF,MAAM,UAAUG,KAAK,SAAhE,sBAID,uBACA,eAAClB,EAAA,EAAD,CAAY8B,UAAU,IAAtB,iDACsC,IACrC,mBAAGsB,KAAK,sCAAsCwB,UAAWX,EAAQoB,WAAjE,wBAFD,6BEjFA,cAAC,IAAD,CAAOU,KAAK,cAAcjE,UJofhB,SAAavH,GAC3B,IAAM2M,EAAS3M,EAAM4M,MAAMC,OAArBF,KACAjD,EAAUnL,IACVE,EAAQiN,cAQd,EAA4BoB,IAAM3M,UAAS,GAA3C,mBAAO4M,EAAP,KAAeC,EAAf,KAIMC,EAAoB,WACzBD,GAAU,IAkBX,OATAvK,qBAAU,WACT,IAAMV,EAASC,SAASC,cAAc,uBAElCF,GACHA,EAAOG,eAAe,CAAEC,SAAU,SAAUC,MAAO,cAMpD,cAAC,IAAMsG,SAAP,UACC,cAAC,IAAD,CAAkBwE,SAAU,EAAGC,iBAAkB,IAAjD,SACC,eAAC5B,EAAA,EAAD,CAAe9M,MAAOA,EAAtB,UACC,cAACuN,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAQrN,SAAS,SAASyL,UAAWX,EAAQrK,OAA7C,SACC,eAAC6M,EAAA,EAAD,WACC,cAAC5E,EAAA,EAAD,CACC6E,KAAK,QACL9B,UAAWX,EAAQ1K,WACnBwH,MAAM,UACN,aAAW,OACXC,QAlCkB,WACxBuG,GAAU,IA4BL,SAOC,cAAC,IAAD,MAED,cAACvH,EAAA,EAAD,CAAYzE,QAAQ,KAApB,SAA0B1C,EAAUY,aAGtC,cAACgN,EAAA,EAAD,CAAS1G,GAAG,uBACZ,cAAC4H,EAAA,EAAD,CACC/C,UAAWX,EAAQnK,OACnBmK,QAAS,CAAE2D,MAAO3D,EAAQhK,aAC1BqC,OAAO,OACPuL,KAAMP,EACNQ,QAASN,EACTxG,QAASwG,EANV,SAQC,cAAC3C,EAAD,MAED,eAAC8B,EAAA,EAAD,CAAW5G,GAAG,WAAW6E,UAAWX,EAAQ7J,QAA5C,UACC,cAACE,EAAD,2BACKC,GADL,IAECC,SAAU3B,EAAU2B,SACpBC,SAAUyM,KAEX,uBACA,cAACvI,EAAD,2BACKpE,GADL,IAECC,SAAU3B,EAAU2B,SACpBC,SAAUyM,EACVtC,UAAWX,EAAQtK,YAEpB,cAAC8M,EAAA,EAAD,CAAS1G,GAAG,0BAEb,cAAC+D,EAAD,yBAAWE,UAAU,QAAWzJ,GAAhC,aACC,cAACwN,EAAA,EAAD,CACChH,MAAM,YACNiB,KAAK,QACL,aAAW,mBAHZ,SAKC,cAAC,IAAD,SAGF,cAAC8B,EAAD,yBAAWE,UAAU,OAAUzJ,GAA/B,aACC,cAACwN,EAAA,EAAD,CACChH,MAAM,YACNiB,KAAK,QACL,aAAW,qBAHZ,SAKC,cAAC,IAAD,mBIjlBF,cAAC,IAAD,CAAO+D,KAAK,IAAIjE,UDPN,SAAkBvH,GAChC,IAAM0J,EAAUnL,KACVE,EAAQiN,cACd,OACC,cAAC,IAAMhD,SAAP,UACC,eAAC6C,EAAA,EAAD,CAAe9M,MAAOA,EAAtB,UACC,cAACuN,EAAA,EAAD,IACA,cAACC,EAAA,EAAD,CAAQrN,SAAS,SAAjB,SACC,eAACsN,EAAA,EAAD,WACC,cAAC5E,EAAA,EAAD,CACC6E,KAAK,QACL9B,UAAWX,EAAQ1K,WACnBwH,MAAM,UACN,aAAW,OACXC,QAAS,WAAON,OAAOqE,SAASC,KAAO,KALxC,SAOC,cAAC,IAAD,MAED,cAAChF,EAAA,EAAD,CAAYzE,QAAQ,KAApB,SAA0B1C,EAAUY,aAGnC,cAACgN,EAAA,EAAD,CAAS1G,GAAG,uBACf,eAAC4G,EAAA,EAAD,WACgB,cAAC3G,EAAA,EAAD,CAAYzE,QAAQ,KAAKuG,UAAU,KAAnC,2BAGA,eAAC9B,EAAA,EAAD,CAAYzE,QAAQ,IAApB,oBACW,uBADX,oCAEqC,uBACjC,cAAC,IAAD,CAAMuL,GAAG,IAAT,yDCjBvBpB,M","file":"static/js/main.dad5b711.chunk.js","sourcesContent":["const lc_config = {\n    \"title\": \"LandChat NG\",\n    \"endpoint\": \"https://lc.hywiki.xyz/api/v1\"\n};\nexport default lc_config;","import lc_config from \"./config\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n\tAppBar,\r\n\tToolbar,\r\n\tTypography,\r\n\tContainer,\r\n\tFab,\r\n\tuseScrollTrigger,\r\n\tCssBaseline,\r\n\tZoom,\r\n\tIconButton,\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tListItemAvatar,\r\n\tAvatar,\r\n\tDivider,\r\n\tThemeProvider,\r\n\tLinearProgress,\r\n\tCircularProgress,\r\n\tTextField,\r\n\tButton,\r\n\tDrawer,\r\n\tListItemIcon,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport KeyboardArrowUpIcon from \"@material-ui/icons/KeyboardArrowUp\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ImageIcon from \"@material-ui/icons/Image\";\r\nimport { SnackbarProvider, useSnackbar } from \"notistack\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"fixed\",\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(2),\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tchatForm: {},\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t},\r\n\tdrawer: {\r\n\t\twidth: 300,\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: 300,\r\n\t},\r\n\tdrawerContainer: {\r\n\t\toverflow: \"auto\",\r\n\t},\r\n\tcontent: {\r\n\t\tflexGrow: 1,\r\n\t\tpadding: theme.spacing(3),\r\n\t},\r\n}));\r\n\r\nfunction ChatView(props) {\r\n\tconst { endpoint, chatroom } = props;\r\n\tconst [msgs, setMsgs] = useState({ messages: [], timestamp: 0 });\r\n\tconst [load, setLoad] = useState(0);\r\n\tconst [timeo, setTimeo] = useState(-1);\r\n\tconst { enqueueSnackbar } = useSnackbar();\r\n\r\n\tconst handleInform = function (words, variant) {\r\n\t\tenqueueSnackbar(words, { variant });\r\n\t};\r\n\r\n\tfunction updateMsg(content, firsttime) {\r\n\t\ttry {\r\n\t\t\tsetMsgs(content);\r\n\t\t\tif (firsttime !== 0) {\r\n\t\t\t\tconst anchor = document.querySelector(\"#top-to-back-anchor\");\r\n\t\t\t\tif (anchor) {\r\n\t\t\t\t\tanchor.scrollIntoView({\r\n\t\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t\t\tblock: \"center\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thandleInform(\"Welcome to chatroom: \" + chatroom, \"success\");\r\n\t\t\t\tif (content.length < 1) {\r\n\t\t\t\t\thandleInform(\r\n\t\t\t\t\t\t\"This chatroom doesn't exist.\\nSend a message to create it.\",\r\n\t\t\t\t\t\t\"info\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\thandleInform(\"Failed to decode message: \" + e, \"error\");\r\n\t\t}\r\n\t\tsetLoad(0);\r\n\t}\r\n\tfunction loadRoom(firsttime) {\r\n\t\tlet lastid = -1;\r\n\t\tsetLoad(1);\r\n\r\n\t\tfetch(endpoint + \"/message_view\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody:\r\n\t\t\t\t\"room=\" +\r\n\t\t\t\tencodeURIComponent(chatroom) +\r\n\t\t\t\t\"&lastid=\" +\r\n\t\t\t\tencodeURIComponent(lastid),\r\n\t\t\theaders: new Headers({\r\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\r\n\t\t\t}),\r\n\t\t})\r\n\t\t\t.then((res) => res.json())\r\n\t\t\t.catch((error) => handleInform(\"Fetch failed: \" + error, \"error\"))\r\n\t\t\t.then((response) => updateMsg(response, firsttime))\r\n\t\t\t.then(function () {\r\n\t\t\t\tsetTimeo(\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tloadRoom(0);\r\n\t\t\t\t\t}, 3000)\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (timeo !== -1) {\r\n\t\t\tclearTimeout(timeo);\r\n\t\t}\r\n\t\tloadRoom(1);\r\n\t\tlet rrobject = JSON.parse(localStorage.recentRoom);\r\n\t\tif (rrobject.rooms.length >= 5) {\r\n\t\t\trrobject.rooms.shift();\r\n\t\t}\r\n\t\tlet date = new Date();\r\n\t\trrobject.rooms.unshift({\r\n\t\t\tname: chatroom,\r\n\t\t\tdate:\r\n\t\t\t\tdate.getMonth() +\r\n\t\t\t\t1 +\r\n\t\t\t\t\"-\" +\r\n\t\t\t\tdate.getDate() +\r\n\t\t\t\t\" \" +\r\n\t\t\t\tdate.getHours() +\r\n\t\t\t\t\":\" +\r\n\t\t\t\tdate.getMinutes(),\r\n\t\t});\r\n\t\t/*\r\n\t\t            \t\t\t\t        let rrobject_raw=JSON.parse(localStorage.recentRoom);\r\n\t\t            \t\t\t\t        if (rrobject.rooms.length >= 5) {\r\n\t\t            \t\t\t\t            rrobject.rooms.shift();\r\n\t\t            \t\t\t\t        }\r\n\t\t            \t\t\t\t        let date = new Date();\r\n\t\t            \t\t\t\t        rrobject_raw.rooms.unshift({\"name\":roomname, \"date\":(date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes()});\r\n\t\t            \t\t\t\t        var rrobject = {\"rooms\":[]};\r\n\t\t            \t\t\t\t        rrobject.rooms = [];\r\n\t\t            \t\t\t\t        for(var i = 0; i < rrobject_raw.rooms.length; i++) {\r\n\t\t            \t\t\t\t            let flag = true;\r\n\t\t            \t\t\t\t            for(var j = 0; j < rrobject.rooms.length; j++) {\r\n\t\t            \t\t\t\t                if (rrobject_raw.rooms[i].name == rrobject.rooms[i].name) {\r\n\t\t            \t\t\t\t                    flag = false;\r\n\t\t            \t\t\t\t                    break;\r\n\t\t            \t\t\t\t                }\r\n\t\t            \t\t\t\t            }\r\n\t\t            \t\t\t\t            if (flag) {\r\n\t\t            \t\t\t\t                rrobject.rooms.push(rrobject_raw.rooms[i]);\r\n\t\t            \t\t\t\t            }\r\n\t\t            \t\t\t\t        }\r\n\t\t            \t\t\t\t        */\r\n\t\tlocalStorage.recentRoom = JSON.stringify(rrobject);\r\n\t}, [chatroom]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List>\r\n\t\t\t\t{msgs.messages.map((v, index) => {\r\n\t\t\t\t\treturn <MsgView key={v.msgid} data={v}></MsgView>;\r\n\t\t\t\t})}\r\n\t\t\t</List>\r\n\t\t\t<LinearProgress style={{ display: load ? \"block\" : \"none\" }} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction ChatForm(props) {\r\n\tconst { enqueueSnackbar } = useSnackbar();\r\n\tconst { endpoint, chatroom } = props;\r\n\tconst [ imgupl, setImgupl ] = useState(0);\r\n\t\r\n\tfunction getCookie(cname) {\r\n\t\tvar name = cname + \"=\";\r\n\t\tvar ca = document.cookie.split(\";\");\r\n\t\tfor (var i = 0; i < ca.length; i++) {\r\n\t\t\tvar c = ca[i].trim();\r\n\t\t\tif (c.indexOf(name) === 0)\r\n\t\t\t\treturn c.substring(name.length, c.length);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\tconst handleInform = function (words, variant) {\r\n\t\tenqueueSnackbar(words, { variant });\r\n\t};\r\n\tfunction sendHandler() {\r\n\t\tlet msgValue = document.querySelector(\"#msginput-textarea\").value;\r\n\t\tlet msgData = new FormData();\r\n\t\tmsgData.append(\"room\", chatroom);\r\n\t\tmsgData.append(\"id\", getCookie(\"lc_uid\"));\r\n\t\tmsgData.append(\"pwd\", getCookie(\"lc_passw\"));\r\n\t\tmsgData.append(\"msg\", msgValue);\r\n\t\tmsgData.append(\"type\", 0);\r\n\t\tmsgData.append(\"app_id\", \"aI5qE5eL0gH1bD1pQ5tC1dC0cD0bF1\");\r\n\t\tfetch(endpoint + \"/message_send\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: msgData,\r\n\t\t})\r\n\t\t\t.then((res) => res.text())\r\n\t\t\t.catch((error) => handleInform(\"Fetch failed: \" + error, \"error\"))\r\n\t\t\t.then(function (response) {\r\n\t\t\t\tif (response !== \"Succeed\") {\r\n\t\t\t\t\thandleInform(response, \"warning\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\thandleInform(\"Message sent\", \"success\");\r\n\t\t\t\t\tdocument.querySelector(\"#msginput-textarea\").value = \"\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\tfunction sendKeyHandler(e) {\r\n\t\tvar ev = e || window.event;\r\n\t\tif (ev.keyCode === 13 && ev.ctrlKey) {\r\n\t\t\tsendHandler();\r\n\t\t}\r\n\t}\r\n\tfunction sendPicHandler(picurl) {\r\n\t\tlet msgData = new FormData();\r\n\t\tmsgData.append(\"room\", chatroom);\r\n\t\tmsgData.append(\"id\", getCookie(\"lc_uid\"));\r\n\t\tmsgData.append(\"pwd\", getCookie(\"lc_passw\"));\r\n\t\tmsgData.append(\"msg\", picurl);\r\n\t\tmsgData.append(\"type\", 1);\r\n\t\tmsgData.append(\"app_id\", \"aI5qE5eL0gH1bD1pQ5tC1dC0cD0bF1\");\r\n\t\tfetch(endpoint + \"/message_send\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: msgData,\r\n\t\t})\r\n\t\t\t.then((res) => res.text())\r\n\t\t\t.catch((error) => handleInform(\"Fetch failed: \" + error, \"error\"))\r\n\t\t\t.then(function (response) {\r\n\t\t\t\tif (response !== \"Succeed\") {\r\n\t\t\t\t\thandleInform(response, \"warning\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\thandleInform(\"Message sent\", \"success\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\tfunction handlePicUpload() {\r\n\t    setImgupl(1);\r\n\t\tvar imgFiles = document.querySelector(\"#upload-pic\").files;\r\n\t\tvar picData = new FormData();\r\n\t\tpicData.append(\"from\", lc_config.title);\r\n\t\tpicData.append(\"image\", imgFiles[0]);\r\n\r\n\t\tfetch(\"https://pic.hywiki.xyz/api/upload\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: picData,\r\n\t\t})\r\n\t\t.then((res) => res.json())\r\n\t\t.catch((error) => handleInform(\"Fetch failed: \" + error, \"error\"))\r\n\t\t.then(function (response) {\r\n\t\t\tif (response.code / 100 === 2) {\r\n\t\t\t\t//handleInform(\"Image uploaded!\", \"success\");\r\n\t\t\t\tsendPicHandler(response.data.url);\r\n\t\t\t} else {\r\n\t\t\t\thandleInform(\r\n\t\t\t\t\t\"Image upload failed: \" + response.msg,\r\n\t\t\t\t\t\"error\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t    setImgupl(0);\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<form id=\"msginput-form\">\r\n\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\tSend message at chatroom: {chatroom}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"msginput-textarea\"\r\n\t\t\t\t\tlabel=\"Input Message\"\r\n\t\t\t\t\tplaceholder=\"Press Ctrl+Space to send\"\r\n\t\t\t\t\tmultiline\r\n\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tvariant=\"filled\"\r\n\t\t\t\t\tmaxLength={1500}\r\n\t\t\t\t\tonKeyDown={sendKeyHandler}\r\n\t\t\t\t/>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={sendHandler}\r\n\t\t\t\t>\r\n\t\t\t\t\tSend\r\n\t\t\t\t</Button>\r\n\t\t\t\t<input\r\n\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\tid=\"upload-pic\"\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\tonChange={handlePicUpload}\r\n\t\t\t\t/>\r\n\t\t\t\t<label htmlFor=\"upload-pic\">\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\taria-label=\"upload picture\"\r\n\t\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ImageIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</label>\r\n\t\t\t\t<CircularProgress size={20} style={ !imgupl ? { display: \"none\" } : {} }/>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction MsgView(props) {\r\n\tconst { data } = props;\r\n\tconst classes = useStyles();\r\n\r\n\tfunction avatarColor(name) {\r\n\t\tvar str = \"\";\r\n\t\tfor (var i = 0; i < name.length; i++) {\r\n\t\t\tstr += parseInt(name[i].charCodeAt(0), 10).toString(16);\r\n\t\t}\r\n\t\treturn \"#\" + str.slice(1, 4);\r\n\t}\r\n\t/*\r\n\tuseEffect(() => {\r\n\t    MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, ReactDOM.findDOMNode(this)]);\r\n\t}, [data.msg]);\r\n\t*/\r\n\r\n\tfunction renderTextMsg(data) {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tcomponent=\"span\"\r\n\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\tcolor=\"textPrimary\"\r\n\t\t\t\t\tstyle={{ whiteSpace: \"pre-wrap\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{data.content}\r\n\t\t\t\t\t<br />\r\n\t\t\t\t</Typography>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction renderPicMsg(data) {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<a href={data.content} target=\"_blank\">\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={data.content}\r\n\t\t\t\t\t\theight={100}\r\n\t\t\t\t\t\talt={data.name}\r\n\t\t\t\t\t\tstyle={{ maxHeight: 100 }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t\t<br />\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tfunction renderMsg(data) {\r\n\t\tswitch (data.type) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn renderTextMsg(data);\r\n\t\t\tcase 1:\r\n\t\t\t\treturn renderPicMsg(data);\r\n\t\t\tdefault:\r\n\t\t\t\treturn <React.Fragment>???</React.Fragment>;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div data-msgid={data.msgid}>\r\n\t\t\t<ListItem alignItems=\"flex-start\">\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tsrc={data.picurl}\r\n\t\t\t\t\t\tstyle={{ backgroundColor: avatarColor(data.name) }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{data.name.substr(0, 2)}\r\n\t\t\t\t\t</Avatar>\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={data.name}\r\n\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t{renderMsg(data)}\r\n\t\t\t\t\t\t\t{data.time + \" @ \" + data.app}\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" component=\"li\" />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction ScrollBtn(props) {\r\n\tconst { children, window, direction } = props;\r\n\tconst classes = useStyles();\r\n\tvar tri = useScrollTrigger({\r\n\t\ttarget: window ? window() : undefined,\r\n\t\tdisableHysteresis: true,\r\n\t\tthreshold: 250,\r\n\t});\r\n\tif (direction === \"back\") {\r\n\t\ttri = !tri;\r\n\t}\r\n\tconst trigger = tri;\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tconst anchor = (event.target.ownerDocument || document).querySelector(\r\n\t\t\tdirection == \"back\" ? \"#top-to-back-anchor\" : \"#back-to-top-anchor\"\r\n\t\t);\r\n\r\n\t\tif (anchor) {\r\n\t\t\tanchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Zoom in={trigger}>\r\n\t\t\t<div\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t\trole=\"presentation\"\r\n\t\t\t\tclassName={classes.root}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</Zoom>\r\n\t);\r\n}\r\n\r\nScrollBtn.propTypes = {\r\n\tchildren: PropTypes.element.isRequired,\r\n\twindow: PropTypes.func,\r\n};\r\n\r\nfunction LeftBar(props) {\r\n\tconst classes = useStyles();\r\n\r\n\tfunction avatarColor(name) {\r\n\t\tvar str = \"\";\r\n\t\tfor (var i = 0; i < name.length; i++) {\r\n\t\t\tstr += parseInt(name[i].charCodeAt(0), 10).toString(16);\r\n\t\t}\r\n\t\treturn \"#\" + str.slice(1, 4);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<div className={classes.drawerContainer}>\r\n\t\t\t\t<List>\r\n\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\twindow.location.hash = \"/\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<HomeIcon />\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Home\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<ListItem>Recent Rooms</ListItem>\r\n\t\t\t\t\t{JSON.parse(localStorage.recentRoom).rooms.map(\r\n\t\t\t\t\t\t(v, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\t\talignItems=\"flex-start\"\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\tonClick={function () {\r\n\t\t\t\t\t\t\t\t\t\tlet roomname = v.name;\r\n\t\t\t\t\t\t\t\t\t\tif (roomname !== \"\") {\r\n\t\t\t\t\t\t\t\t\t\t\twindow.location.hash =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"/chat/\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\tencodeURIComponent(roomname);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: avatarColor(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv.name\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{v.name.substr(0, 2)}\r\n\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\t\tprimary={v.name}\r\n\t\t\t\t\t\t\t\t\t\tsecondary={\r\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{v.date}\r\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)}\r\n\t\t\t\t</List>\r\n\t\t\t</div>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n\r\nexport default function App(props) {\r\n\tlet { room } = props.match.params;\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\t/*\r\n    if ((getCookie(\"lc_debug\") === \"\" || getCookie(\"lc_uid\") === \"\") && window.location.hash != \"/login\") {\r\n        window.location.hash = \"/login\";\r\n    }\r\n    */\r\n\r\n\tconst [dropen, setDropen] = React.useState(false);\r\n\tconst handleDrawerOpen = () => {\r\n\t\tsetDropen(true);\r\n\t};\r\n\tconst handleDrawerClose = () => {\r\n\t\tsetDropen(false);\r\n\t};\r\n\r\n\tfunction handleDrop(e) {\r\n\t\te.preventDefault();\r\n\t\tconsole.log(e.dataTransfer.files);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst anchor = document.querySelector(\"#top-to-back-anchor\");\r\n\r\n\t\tif (anchor) {\r\n\t\t\tanchor.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n\t\t}\r\n\t\t//document.querySelector(\"#chatarea\").addEventListener(\"dragover\", handleDrop);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<SnackbarProvider maxSnack={5} autoHideDuration={3000}>\r\n\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t<AppBar position=\"sticky\" className={classes.appBar}>\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\taria-label=\"Home\"\r\n\t\t\t\t\t\t\t\tonClick={handleDrawerOpen}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<Typography variant=\"h5\">{lc_config.title}</Typography>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t<Toolbar id=\"back-to-top-anchor\" />\r\n\t\t\t\t\t<Drawer\r\n\t\t\t\t\t\tclassName={classes.drawer}\r\n\t\t\t\t\t\tclasses={{ paper: classes.drawerPaper }}\r\n\t\t\t\t\t\tanchor=\"left\"\r\n\t\t\t\t\t\topen={dropen}\r\n\t\t\t\t\t\tonClose={handleDrawerClose}\r\n\t\t\t\t\t\tonClick={handleDrawerClose}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<LeftBar />\r\n\t\t\t\t\t</Drawer>\r\n\t\t\t\t\t<Container id=\"chatarea\" className={classes.content}>\r\n\t\t\t\t\t\t<ChatView\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tendpoint={lc_config.endpoint}\r\n\t\t\t\t\t\t\tchatroom={room}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<ChatForm\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tendpoint={lc_config.endpoint}\r\n\t\t\t\t\t\t\tchatroom={room}\r\n\t\t\t\t\t\t\tclassName={classes.chatForm}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Toolbar id=\"top-to-back-anchor\" />\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t\t<ScrollBtn direction=\"back\" {...props}>\r\n\t\t\t\t\t\t<Fab\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\taria-label=\"scroll to bottom\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<KeyboardArrowDownIcon />\r\n\t\t\t\t\t\t</Fab>\r\n\t\t\t\t\t</ScrollBtn>\r\n\t\t\t\t\t<ScrollBtn direction=\"top\" {...props}>\r\n\t\t\t\t\t\t<Fab\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\taria-label=\"scroll back to top\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<KeyboardArrowUpIcon />\r\n\t\t\t\t\t\t</Fab>\r\n\t\t\t\t\t</ScrollBtn>\r\n\t\t\t\t</ThemeProvider>\r\n\t\t\t</SnackbarProvider>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n","import lc_config from \"./config\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n\tAppBar,\r\n\tToolbar,\r\n\tTypography,\r\n\tThemeProvider,\r\n\tCssBaseline,\r\n\tContainer,\r\n\tIconButton,\r\n\tFormControl,\r\n\tTextField,\r\n\tButton,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport swal from \"sweetalert\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tposition: \"fixed\",\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(2),\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tlink: {\r\n\t\tcolor: \"hsla(0,0%,100%,.87)\",\r\n\t\ttextDecoration: 'none',\r\n\t\t'&:hover': {\r\n            textDecoration: 'underline',\r\n        }\r\n\t},\r\n}));\r\n\r\nexport default function Welcome(props) {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\r\n\tconst [login, setLogin] = useState(0);\r\n\r\n\tfunction getCookie(cname) {\r\n\t\tvar name = cname + \"=\";\r\n\t\tvar ca = document.cookie.split(\";\");\r\n\t\tfor (var i = 0; i < ca.length; i++) {\r\n\t\t\tvar c = ca[i].trim();\r\n\t\t\tif (c.indexOf(name) === 0)\r\n\t\t\t\treturn c.substring(name.length, c.length);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (typeof Storage === \"undefined\") {\r\n\t\t\talert(\r\n\t\t\t\t\"You have to enable Local Storage of your browser to run this application. If you can't do it, please update your browser to Chrome 4.0+, MS Edge 8.0+, Firefox 3.5+, Safari 4.0+ or Opera 11.5+.\"\r\n\t\t\t);\r\n\t\t\tconsole.error(\r\n\t\t\t\t\"You have to enable Local Storage of your browser to run this application. If you can't do it, please update your browser to Chrome 4.0+, MS Edge 8.0+, Firefox 3.5+, Safari 4.0+ or Opera 11.5+.\"\r\n\t\t\t);\r\n\t\t}\r\n\t\tif (getCookie(\"lc_debug\").indexOf(\"DEBUG\") != -1) {\r\n\t\t\tsetLogin(1);\r\n\t\t}\r\n\t});\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<AppBar position=\"sticky\">\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\taria-label=\"menu\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\twindow.location.hash = \"/\";\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<HomeIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<Typography variant=\"h5\">{lc_config.title}</Typography>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Toolbar id=\"back-to-top-anchor\" />\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Typography variant=\"h3\" component=\"h1\">\r\n\t\t\t\t\t\tWelcome to LandChat!\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div id=\"roomselect\">\r\n\t\t\t\t\t\t<Typography variant=\"body1\" component=\"p\">\r\n\t\t\t\t\t\t\tEnter the name of the room you want to join:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<FormControl variant=\"outlined\">\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"roomselect-input\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Room name\"\r\n\t\t\t\t\t\t\t\t\tname=\"roomname\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tonClick={function () {\r\n\t\t\t\t\t\t\t\t\t\tlet roomname =\r\n\t\t\t\t\t\t\t\t\t\t\tdocument.querySelector(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"#roomselect-input\"\r\n\t\t\t\t\t\t\t\t\t\t\t).value;\r\n\t\t\t\t\t\t\t\t\t\tif (roomname !== \"\") {\r\n\t\t\t\t\t\t\t\t\t\t\twindow.location.hash =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"/chat/\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\tencodeURIComponent(roomname);\r\n\t\t\t\t\t\t\t\t\t\t\tlet rrobject = JSON.parse(\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.recentRoom\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tif (rrobject.rooms.length >= 5) {\r\n\t\t\t\t\t\t\t\t\t\t\t\trrobject.rooms.shift();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tlet date = new Date();\r\n\t\t\t\t\t\t\t\t\t\t\trrobject.rooms[\r\n\t\t\t\t\t\t\t\t\t\t\t\trrobject.rooms.length\r\n\t\t\t\t\t\t\t\t\t\t\t] = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: roomname,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdate:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/*date.getFullYear() + \"-\" + */ date.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t1 +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate.getDate() +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" \" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate.getHours() +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\":\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate.getMinutes(),\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.recentRoom =\r\n\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(rrobject);\r\n\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tJoin\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ display: login ? \"none\" : \"block\" }}>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\tYou haven't logged in yet. Please{\" \"}\r\n\t\t\t\t\t\t\t<Link to=\"/login\" className={classes.link}>\r\n\t\t\t\t\t\t\t\tclick here\r\n\t\t\t\t\t\t\t</Link>{\" \"}\r\n\t\t\t\t\t\t\tto login or sign up first.\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Typography variant=\"h4\" component=\"h2\">\r\n\t\t\t\t\t\t\t公告\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t    <br />\r\n\t\t\t\t\t\t\tLandChat NG 更新内容\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"body2\">\r\n\t\t\t\t\t\t\t版本0.3.0.dev4\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t    <li>发送图片支持；</li>\r\n\t\t\t\t\t\t\t    <li>Ctrl+Enter发送支持；</li>\r\n\t\t\t\t\t\t\t    <li>深色模式；</li>\r\n\t\t\t\t\t\t\t    <li>消息发送逻辑优化；</li>\r\n\t\t\t\t\t\t\t    <li>边栏支持，首页去除最近聊天室；</li>\r\n\t\t\t\t\t\t\t    <li>Bug修复。</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t下次更新预告: \r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t    \t\t\t\t\t<li>可以修改密码，昵称，头像；</li>\r\n\t\t    \t\t\t\t\t<li>消息更新间隔缩短到1s；</li>\r\n\t\t    \t\t\t\t\t<li>即将迎来首个稳定版本。</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t如果您感兴趣可以试试开发env:&nbsp;\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"https://dev.lc.hywiki.xyz/#/\"\r\n\t\t\t\t\t\t\t\tclassName={classes.link}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\thttps://dev.lc.hywiki.xyz\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t里面你可以实时看到564的开发进展，但加载慢，不稳定，可能随时会挂。\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Container>\r\n\t\t\t</ThemeProvider>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n","import lc_config from \"./config\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n\tAppBar,\r\n\tToolbar,\r\n\tTypography,\r\n\tThemeProvider,\r\n\tCssBaseline,\r\n\tContainer,\r\n\tIconButton,\r\n\tTextField,\r\n\tButton,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport swal from \"sweetalert\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport { Link } from \"react-router-dom\";\r\n//import {useParams} from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tposition: \"fixed\",\r\n\t\tbottom: theme.spacing(2),\r\n\t\tright: theme.spacing(2),\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tsignupLink: {\r\n\t    color: \"hsla(0,0%,100%,.87)\",\r\n\t\ttextDecoration: 'none',\r\n\t\t'&:hover': {\r\n            textDecoration: 'underline',\r\n        }\r\n\t}\r\n}));\r\n\r\nexport default function Login(props) {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n    \r\n    function getCookie(cname) {\r\n    \tvar name = cname + \"=\";\r\n    \tvar ca = document.cookie.split(\";\");\r\n    \tfor (var i = 0; i < ca.length; i++) {\r\n    \t\tvar c = ca[i].trim();\r\n    \t\tif (c.indexOf(name) === 0) return c.substring(name.length, c.length);\r\n    \t}\r\n    \treturn \"\";\r\n    }\r\n\r\n    if ((getCookie(\"lc_debug\") !== \"\" && getCookie(\"lc_uid\") !== \"\")) {\r\n        window.location.hash = \"/\";\r\n    }\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t<CssBaseline />\r\n\t\t\t\t<AppBar position=\"sticky\">\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\taria-label=\"menu\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\twindow.location.hash = \"/\";\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<HomeIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<Typography variant=\"h5\">{lc_config.title}</Typography>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Toolbar id=\"back-to-top-anchor\" />\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Typography variant=\"h3\" component=\"h1\">\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tnoValidate\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\taction={lc_config.endpoint+\"/user_login\"}\r\n\t\t\t\t\t\tmethod=\"post\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tid=\"login-user\"\r\n\t\t\t\t\t\t\tlabel=\"Username or email\"\r\n\t\t\t\t\t\t\tname=\"usr\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tid=\"login-pswd\"\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\tname=\"pwd\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Button id=\"login-btn\" variant=\"contained\" color=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<Typography component=\"p\">\r\n\t\t\t\t\t\tIf you don't have an account, please{\" \"}\r\n\t\t\t\t\t\t<a href=\"https://lc.hywiki.xyz/lc_signup.php\" className={classes.signupLink}>click here</a> to sign up.\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Container>\r\n\t\t\t</ThemeProvider>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n","import lc_config from \"./config\";\nimport React from \"react\";\nimport {\n\tAppBar,\n\tToolbar,\n\tTypography,\n\tThemeProvider,\n\tCssBaseline,\n\tContainer,\n\tIconButton\n} from \"@material-ui/core\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\tposition: \"fixed\",\n\t\tbottom: theme.spacing(2),\n\t\tright: theme.spacing(2)\n\t},\n\tmenuButton: {\n\t\tmarginRight: theme.spacing(2)\n\t},\n\ttitle: {\n\t\tflexGrow: 1\n\t}\n}));\n\nexport default function NotFound(props) {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<AppBar position=\"sticky\">\n\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\taria-label=\"menu\"\n\t\t\t\t\t\t\tonClick={() => {window.location.hash = \"/\";}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HomeIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Typography variant=\"h5\">{lc_config.title}</Typography>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t    <Toolbar id=\"back-to-top-anchor\" />\n\t\t\t\t<Container>\n                    <Typography variant=\"h3\" component=\"h1\">\n                        404 Not Found\n                    </Typography>\n                    <Typography variant=\"p\">\n                        Uh oh..<br/>\n                        We cannot find the page you want.<br/>\n                        <Link to=\"/\">Go back to Homepage.</Link>\n                    </Typography>\n\t\t\t\t</Container>\n\t\t\t</ThemeProvider>\n\t\t</React.Fragment>\n\t);\n}","import { StrictMode } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\n\r\nimport App from \"./App\";\r\nimport Welcome from \"./Welcome\";\r\nimport Login from \"./Login\";\r\nimport NotFound from \"./404\";\r\n\r\nimport { ThemeProvider, createTheme } from \"@material-ui/core/styles\";\r\nimport { blue, teal } from \"@material-ui/core/colors\";\r\n\r\n//useEffect(() => {\r\nif (!localStorage.recentRoom) {\r\n\tlocalStorage.recentRoom = '{\"rooms\": []}';\r\n}\r\n//setRecentRoom(JSON.parse(localStorage.recentRoom));\r\n//}, [localStorage.recentRoom]);\r\n\r\nconst theme = createTheme({\r\n\tpalette: {\r\n\t\ttype: \"dark\",\r\n\t\tprimary: blue,\r\n\t\tsecondary: teal,\r\n\t},\r\n});\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n\t<StrictMode>\r\n\t\t<ThemeProvider theme={theme}>\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/\" exact component={Welcome} />\r\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t<Route path=\"/chat/:room\" component={App} />\r\n\t\t\t\t\t<Route path=\"*\" component={NotFound} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</ThemeProvider>\r\n\t</StrictMode>,\r\n\trootElement\r\n);\r\n"],"sourceRoot":""}